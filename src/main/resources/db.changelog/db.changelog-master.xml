<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                            http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="123" author="SazhinEA" context="defects">

        <createSequence sequenceName="hibernate_sequence" startValue="1" incrementBy="1"/>

        <createTable tableName="defects">

            <column name="id" type="bigint">
                <constraints primaryKey="true"/>
            </column>

            <column name="name" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="description" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="reasons" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="solutions" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="picture" type="varchar">
                <constraints nullable="true"/>
            </column>

        </createTable>

        <sql>
            insert into defects values
(1, 'Дефект: Нет экструдирования при начале печати', 'Описание: 3D принтер не печатает', 'Причины:
•	отсутствие пластика в сопле,
•	засор отверстия сопла,
•	сопло располагается вплотную к рабочей поверхности ,
•	шестерня для подачи филамента прокручивается.
', 'Как бороться
•	Убедитесь, что вы подготовили экструдер таким образом, чтобы сопло было заполнено пластиком и готово к экструдированию. Стандартный прием состоит в том, чтобы напечатать так называемую «юбку» (skirt). Эта «юбка» — кольцо, обводка, контур вокруг вашей будущей детали, и пока оно печатается, экструдер заполняется пластиком.
•	Прочистить сопло можно механически, для этого многие магазины предлагают специальные иглы и сверла для прочистки сопла экструдера, так же рекомендуем воспользоваться методом холодной протяжки. Последняя мера, если ничего не помогает, проблема с забившимся экструдером решается путем его разборки, и перед тем, как взяться за это дело, полезно связаться с производителем или продавцом вашего принтера. Сопло и термобарьер можно погрузить в растворитель, тем самым химически прочистить налипший пластик, затем механически вычестить из него весь нагар.
', 'src\\main\\java\\com\\example\\backend_defects\\image\\paris.jpg'),
(2,'Дефект: Коробление (отклеивание от платформы)','Описание: Распечатка не прилипает к платформе 3D-принтера, отклеивается от платформы, изгибается
Искажение геометрии. Из-за перехода пластика из одного состояния в другое ( жидкое - твердо-жидкое - твердое ) и изменения температур, пластик начинает уменьшаться в объеме. Этот процесс проходит неравномерно - сначала остывают края, а затем только центральная часть. Из-за этого возникают внутренние напряжения, которые отрывают края или ломают деталь.
','Причины:
	рабочая поверхность не выровнена,
	сопло расположено слишком далеко от рабочей поверхности,
	первый слой распечатывается слишком быстро,
	неверная настройка температур и (или) материалов рабочей поверхности и филамента
','Как бороться:
•	Уменьшить заполняемость
•	Использовать горячий стол - вы прогреваете нижние слои, что дает равномерное распределение напряжений внутри детали.
•	Делать внешний контур - вы можете печатать внешний слой вокруг детали. Это создает что-то вроде термобарьера вокруг детали, тем самым поддерживая температуру по объему, что приводит к равномерному распределению напряжений по детали. Альтернатива - закрытая камера печати, служит аналогичным образом
•	Использовать конструктивные элементы - Во-первых, проверьте чтобы ваша деталь хорошо лежала на столе - если ваша плоская грань детали вовсе не плоская, то она легко оторвется. Можете либо где-то добавить материала, либо сделать дырку в детали и пр. Таким образом вы искусственно вызовете перераспределение напряжений в детали, однако, этот способ крайне сложен.
•	Увеличьте силу сцепления - вы можете не бороться с напряжениями, а просто обеспечить необходимую силу сцепления. Однако, этот вариант мне кажется не очень хорошим - эти напряжения останутся и вашу деталь потом можно легко сломать в этом месте.
',''),
(3,'Дефект: Недостаточное экструдирование(Недоэкструзия)','Описание: Дырки в печати, проблемы со слоями, дефекты на поверхности
Поверхность детали выходит не ровной, а со всякими вкраплениями, либо наоборот отсутствием пластика там, где он необходим.
','Причины:
	разный диаметр нити филамента указан в программе и используется в экструдере,
	слишком мал коэффициент экструдирования (иногда называется показателем расхода).
','Как бороться:
•	Измените скорость - возможно ваш принтер технически не может печатать на такой скорости. Может потребоваться его смазать или сменить пластик, но для начала попробуйте печатать на меньшей скорости. Кроме этого не все детали и не всеми пластиками, принтер может печатать на максимальной скорости
•	Смените температуру - у всех пластиков есть рекомендованные температуры для печати. Если вы печатаете не той температурой, то не обеспечиваете требуемые параметры по жидкотекучести по работе с данным пластиком и печатать вы будете им не корректно.
•	Проверьте пластик - пластик может отсыреть, быть грязным или быть некачественным. Все это может привести к недоэкструзии, либо что вы вообще не будете печатать. Кроме этого, пластик может сломаться из-за подающего механизма и его прочностных свойств. Возможно, вы не сможете печатать данным пластиком. А может у него диаметр гуляет.. Как вы понимаете, смена пластика на другой позволит быстро понять проблема в принтере или расходнике.
•	Проверьте подающий механизм - в случае работы с мягким пластиком, пластик может переминаться слишком сильно, что не позволит вам им нормально печатать. Тогда скорее всего будет необходимо ослабить захват прутка, однако, делать это стоит лишь предварительно связавшись с тех. поддержкой, если вы делаете это впервые.
•	Проверьте пруток - в ходе печати иногда ваш пруток может завязаться узлом или что-то мешает ему поступать в экструдер. Обязательно проверьте данный момент.
•	Сменить или прочистить сопло - ваше сопло не будет служить бесконечно. В ходе работы, оно будет загрязняться - как от нагара пластика, так от пыли, которую вы допустили. Всегда имейте пару сменных сопел, чтобы понять данную проблему. Кроме этого, когда вы заправляете пластик с меньшем температурой печати, пропечатайте на высокой температуре, чтобы полностью вышли остатки старого пластика и они не мешали работе.
•	Проверьте настройки слайсера - некоторые слайсеры могут использовать отвод сопла и его очистку для избавления от внешних провисаний. Из-за этого, когда вы возвращаете печатающую голову, вы не сразу начинаете подавать пластик. Это может привести к недоэкструзии в некоторых кускам модели.
•	Проверьте тефлоновую трубку - из-за грязи допущенной в зоне печати, тефлоновая трубка может загрязнится. Из-за этого пруток будет испытывать трение, что будет приводить к недоэкструзии.
•	Проверьте шестерни - если шестерни захватывающие пруток будут работать неправильно, то и выходить из сопла он будет проблемно. В случае, если более простые меры вам не подошли - проверьте, чтобы этот механизм работал корректно.
',''),
(4,'Дефект: Избыточное экструдирование','Описание: Принтер поставляет больше материала, чем необходимо.  На распечатке есть излишки филамента.','Причины:
	Недостаточное экструдирование,
	неисправность рабочих механизмов с необходимостью их замены.
	Коэфициент экструдирования или потока в слайсере слишком высокий
','Как бороться?
•	Откройте слайсер и проверьте, что вы правильно выбрали коэфициент экструдирования
•	Если с коэфициентом экструдирования все верно, уменьшите параметр Flow в настройках ПО вашего принтера.
',''),
(5,'Дефект: Щели или дыры на верхнем слое','Описание: Щели или дыры на верхнем слое изделия.','Причины:
	недостаточное количество сплошных верхних слоев,
	слишком низкий процент заполнения,
	недостаточное экструдирование
	неправильное охлаждение верхнего слоя или его недостаточная толщина
','Как бороться?
•	Рекомендуется проверить вентилятор и его расположение — он должен быть направлен на распечатку.
•	Чтобы пластик успевал остыть, необходимо отрегулировать скорость обдува — это можно сделать при помощи G-Code, особенно важно сделать ее максимальной для верхних слоев модели. По возможности необходимо улучшить настройку охлаждения на двусторонний или круговой тип.
•	Увеличение толщины верхних слоев
',''),
(6,'Дефект: Волоски или паутина или пушистость','Описание: На модели торчат маленькие волосики, которые остаются от печатающего сопла.','Причины:
	неверная дистанция втягивания филамента обратно в сопло,
	неверная скорость втягивания филамента,
	слишком высокая температура,
	перемещение происходит на большие открытые расстояния.
','Как бороться:
•	Проверьте пластик - возможно, ваш пластик загрязнен или сделан не качественно. Попробуйте другой пластик и возможно получится избавиться от модели
•	Проверьте сопло - такая пушистость может быть первым признаком, что с соплом что-то не так. Проверьте внешнюю часть сопла, чтобы на ней ничего не торчало или попробуйте другое сопло
•	Удалить дефект после работы - этот тот редкий вид дефекта, от которого довольно легко избавиться пост обработкой. Используйте шкурку, надфиль или другой удобный инструмент.
',''),
(7,'Дефект: Перегрев пластика','Описание: Мелкие части модели перегреваются  и деформируются','Причины:
	недостаточное охлаждение,
	печать ведется при слишком высокой температуре,
	печать ведется на слишком большой скорости.
','Как бороться?
•	Если у вашего принтера есть охлаждающий вентилятор, попытайтесь увеличить мощность охлаждения, чтобы пластик остывал быстрее.
•	Попытаться вести саму печать при более низкой температуре. Когда пластик экструдируется при более низкой температуре, он быстрее застывает и лучше держит форму. Попробуйте снизить температуру на 5-10 градусов.
•	Снизить скорость печати маленьких слоев, чтобы предоставить им достаточное время для остывания.
',''),
(8,'Дефект: Смещение слоев или отсутствие выравнивания','Описание: Слои смещаются в средине распечатки','Причины:
	печатающая головка движется слишком быстро,
	механические или электрические проблемы (например у ременной передачи ремнимогут растянуться и это будет сильно сказываться на точном позиционировании)
','Как бороться?
•	Проверьте насколько туго натянуты ремни: они не должны висеть свободно, но и не должны быть слишком затянуты.
•	Проверьте крышку, стержни и другие детали сверху принтера. Убедитесь, что все детали правильно закреплены.
•	Убедитесь, что шпильки по оси Z ровные
',''),
                                       (9,'Дефект: Разделение и расщепление слоев (расслоение детали)','Описание: Два или более слоя частично разделены или отделены друг от друга.Если слои связаны друг с другом недостаточно хорошо, получившийся объект может расколоться и развалиться.','Причины:
	слишком большая высота слоя,
	слишком низкая температура печати.
','Как бороться?
•	Нужно проверить, — соотношение высоты слоя и диаметра отверстия сопла. Попробуйте уменьшить высоту слоя
•	Убедитесь, что вы печатаете при правильной температуре, которая соответствует вашему филаменту. Попробуйте увеличить температуру на 10 градусов.
',''),
                                       (10,'Дефект: Перекос','Описание: Слои поплыли, Вертикаль не соблюдается, слои не ложатся ровно друг на друга','Причины:
	один из шкивов, закрепляемых к шаговому двигателю, ослаб и шатается
	один из ремней препятствует полному движению печатающей головки
','Как бороться:
•	Проверьте ремни. Так как конструкций много, универсальный ответ тут дать сложно. Проверьте, чтобы они нормально лежали в местах контакта и нигде не перетирались. Посмотрите инструкцию принтера или какие-нибудь советы в интернете - вполне возможно проблему уже разобрали до вас.
•	Если принтер просто смещает слои друг относительно друга, то вполне возможно, что не обеспечена фиксация шкивов должным образом. С помощью черного маркера можете пометить положение, а после печати сравнить и подкрутить это место в случае необходимости.
•	Подвигайте печатающую голову без питания - она должна двигаться без существенных проблем. Если это не так - то может стоит наконец смазать валы ?
•	Не обеспечивается перпендикулярность - опять-таки из-за плохого крепления может не обеспечиваться перпендикулярность осей X и Y. Это может привести к данному дефекту, а значит пора снова лезть в принтер и крутить.
•	Проверьте печатающую платформу - стекло может начать елозить на вашем принтере. Причем как-раз таки в одном направлении. В таком случае надо каким либо образом обеспечить его фиксацию.
•	Проблема с электроникой. Редкий случай, но возможный.
',''),
                                       (11,'Дефект: Вскип, Подутость','Описание: Дырки на верхнем слое, проблема с внешним слоем. Выступы на верхнем слое детали - могут быть как открытого, так и закрытого типа. ','Причины:
провисанием пластика, который не успевает охлаждаться будучи напечатанным в воздухе без поддержек.
','Как бороться:
•	Обеспечьте охлаждение - ваш пластик должен хорошо остывать на верхнем слое. По рекомендациям, на этом этапе охлаждение должно идти максимально.
•	Обеспечьте достаточную толщину слоя и стенки - Кроме достаточного охлаждения, у вас должно быть необходимое количество слоев. Опять-таки по рекомендациям, ваша стенка должна состоять, как минимум, в 6 слоев вашей толщины. Таким образом, при печати слоем 0.1 мм вам желательно, чтобы ваша стенка была не менее 0.6 мм. Но помните - слишком тонкие базовые слои тоже не подойдут - они просто не будут держать себя и другие слои.
•	Попробуйте изменить заполняемость - некоторые слайсеры изменяют конфигурацию заполняемости на определенном проценте заполнения, то есть разница может быть уже даже между 24% и 25%. Кроме этого, при большей заполняемости расстояние, которое печатается в воздухе меньше, что тоже может убрать данный дефект.
',''),
                                       (12,'Дефект : Неслойность ','Описание: Круглые вещи выходят не круглые, параллельные прямые выходят не параллельными','Причины:
Ремни, идущие к шаговым моторам - скорее всего недостаточно плотно крепятся.
','Как бороться:
•	Подтяните ремни около печатающей головы - как это сделать, лучше всего посмотреть на портале 3dtoday или у запросить у вашего поставщика 3d принтера.
•	Проверьте, чтобы все крепежи были плотно затянуты - для этого воспользуйтесь инструментом, который скорее всего шел у вас в комплекте
•	Смажьте направляющие - добавить буквально по одной капле легкой смазки на ваши направляющие.
',''),
                                       (13,'Дефект : Слоновья нога','Часто используемое описание: Толстые нижние слои, неодинаковые слои в основании.','Причины:
	Плохо выровненная печатная форма,
	Слишком маленькое Z-смещение
	Слишком высокая температура рабочего стола
	Расстояние от сопла будет меньше, чем толщина слоя
','Как бороться:
•	Отрегулируйте стол - ваше сопло не должно упираться в печатающую платформу - должен оставаться незначительный, но все-таки зазор.
•	Уменьшите температуру стола - небольшое уменьшение температуры стола тоже может сказаться на уменьшении данного дефекта. Не увлекайтесь данными способами слишком сильно - это может ухудшить общее качество печати.
•	Конструкционные улучшения модели - добавьте маленькие фаски или сопряжения. Вам придется немного поиграться с настройками, но благодаря такому конструктивному улучшению в модели ваша модель будет ровно и красивой. Однако, определить какой делать фаску сказать точно невозможно. Начните с фаски 0.5 x 45 , а дальше находите эмпирическим путем оптимальный вариант.
',''),
                                       (14,'Дефект : Свесы','Описание:  Во время перехода печатающей головы от одной детали до другой или какого-то крупного элемента большой детали до другого, возникает длинный тонкий слой пластика, который портит внешнюю форму детали (деталей). ','Причины:
	На кончике сопла остается пластик
	Низкая скорость печати
	Высокая температура печати
','Как бороться:
•	Используйте функцию retract - благодаря ей, печатающая голова чуть-чуть вернет назад пластик, так образом убирая его с кончика сопла. Данная настройка активируется непосредственно в слайсере (если он поддерживает ее). В слайсере Cura ретракт рисуется тонкими синими линиями и вы можете на уровне готового задания проверить данный момент.
•	Увеличьте скорость печати - физика проста - увеличив скорость печати, вы уменьшили время, когда пластик может зацепиться за вашу деталь. Однако, увеличение скорости печати не всегда возможно и может вызвать другие дефекты.
•	Измените температуру печати - температура печати напрямую влияет на жидкотекучесть, особенно в случае с PLA пластиком. Уменьшение температуры даже на 10 градусов существенно уменьшает эффект от внешних провисаний.
',''),
                                       (15,'Дефект : Волнистость','Часто используемое описание: Изменение цвета у краев детали, дефекты по краям','Причины:
	Колебания каретки, вызванные упругим растяжением ремня. Виноваты в этом и инерция(большая масса каретки и/или большая скорость каретки) и упругость ремня(слишком тонкий или узкий ремень, материал ремня также имеет значение).
','Как бороться:
•	Уменьшить скорость печати - уменьшение скорости печати, уменьшает резкость на поворотах ,тем самым сглаживая эффект.
•	Уменьшить ускорение печатающей головы - эти настройки доступны не во всех слайсерах, однако, это позволит избавить от дефекта без уменьшения скорости печати.
•	Измените температуру печати - как мы упоминали ранее, температура влияет на жидкотекучесть, так что уменьшение температуры печати может помочь избавиться от дефекта.
',''),
                                       (16,'Дефект : Рыхлота, Провисания ','Описание: Сопли на детали, провисание пластик на детали
Один из самых распространенных и базовых дефектов - из-за печати в воздухе пластик провисает вместо получения ровной горизонтальной поверхности.
','Причины:
	Пластик не успевает остывать
	Печать без поддержки
	Высокая температура печати
	Высокая скорость печати
','Как бороться:
•	Охлаждение - в зависимости от пластика, вам может понадобится охлаждение или нет. Если это необходимо - обеспечьте его максимально, насколько возможно.
•	Печатайте больше одной детали - в случае мелких деталей, существенно поможет печать больше одной детали. Таким образом вы отведете источник тепла и дадите время вашей детали остыть.
•	Поработайте с толщиной слоя - невозможно дать рекомендацию, лучше ли увеличить слой или его уменьшить. В каждой ситуации надо решать, однако, изменение толщины слоя может улучшить или ухудшить эффект от провисаний.
•	Уменьшите скорость печати - очень часто уменьшение скорости печати может улучшить качество вашей детали.
•	Уменьшить температуру - если вы уменьшите температуру, пластик будет быстрее охлаждаться до твердого состояния. Однако, нельзя понижать температуру слишком низко, иначе качество печати может упасть.
•	Измените позицию детали - если это возможно без потери качества, постарайтесь по-другому расположить деталь. Остановитесь, подумайте или воспользуйтесь автопозиционированием (например, Meshmixer). Вместо того, чтобы бороться с дефектом часто можно его просто исключить.
',''),
                                       (17,'Дефект : Царапины','Описание: Царапины на поверхности и неравномерность по цвету','Причины : Во время перемещения печатающая головка оставляем за собой след на пластике в следствие близкого контакта с поверхностью. Это может быть как задевание старого пластика, так и размазывание нового пластика, которые вытекает из сопла из-за контакта.','Как бороться:
•	Увеличение скорости и уменьшение температуры - как в других подобных дефектах, когда пластик оставляет след, увеличение скорости и уменьшение температуры могут снизить эффект от данной проблемы.
•	Изменение настройки слайсера - В большой степени данный дефект можно контролировать слайсером. На примере Cura''ы можно использовать функцию z-hop (приподнимает сопло). Кроме этого можно поработать над ретрактом.
•	Изменение геометрии - данный дефект может еще проявляться на сложных поверхностях. Попробуйте добавить ровный слой на модели или в целом упростить геометрию, если вы сталкиваетесь с такой проблемой и она сильно портит вам жизнь.
',''),
                                       (18,'Дефект : Недозаполнение','Описание: Деталь странно печатается. Неправильное заполнение детали. Печать поддержек где их быть не должно','Причины :
	у полигонов неправильно направлены нормали,
	модель не до конца сшита ( есть дырки) или состоит из нескольких элементов
','Как бороться:
•	Проверьте модель в Netfabb/Meshmixer - с помощью специализированных продуктов вы можете проверить модель и посмотреть, какие есть в ней ошибки. Данные программы устраняют многие проблемы, которые были допущены перед печатью. Однако, данные программы могут исказить вашу геометрию.
•	Исправьте электронную модель - если у вас есть навыки и возможность воспользуется функционалом 3д программ для исправления сетки. Сшейте сетки, закройте пустоты, обратите нормали , после чего проверьте получившийся g-code. В нем вы увидите, как будет печататься ваша модель и все ли вас устраивает.
',''),
                                       (19,'Дефект: Пропущенный слой','Описание: Слой отличается от остальных слоев модели. Модель слоится на куски.','Причины:
	Недоэкструзия
	Проблемы механизма.
','Как бороться:
•	Ознакомьтесь с недоэкструзией - возможно, что вы увидите еще похожие дефекты и будете знать, как вам тогда действовать.
•	Смазать Z-направляющую - поскольку стол перемещается по Z направлению, то возможно на каких-то участках у вас скопилась грязь или не хватает смазки. Смажьте направляющую по рекомендации от производителя и проверьте работу.
•	Проблема с подшипниками - возможно, что проблема не в направляющей, а в другом элементе подъемного механизма. В этом случае вам надо проверить регулировку подшипников или отдать принтер в сервис. Дополнительную информацию ищите на портале 3dtoday
•	Излишняя смазка - слишком много смазывающего материала -не значит лучше. Он может начать легко скапливать грязь и опять-таки начать вызывать данный эффект. Протрите валы и смажьте необходимым количеством материала.
•	Проблема с электроникой - возможно, что проблема связана не с механической, а электронной частью механизма. Если другие способы не помогают, то скорее всего принтер может понадобится отдать на ремонт.
•	Дефектные детали - к сожалению, такое бывает. Возможно, что все сделано хорошо, но какая-то деталь механизма вышла из строя. Опять-таки без разбора принтера это не решить.
',''),
                                       (20,'Дефект: Несоблюдение осей','Описание: Не соблюдается прямой угол.','Причины:
	Ошибка в настройках осей
','Как бороться:
•	Редактирование осей - дефект устраняется только механически. Запросите у поставщика или производителя информацию о том, как скорректировать оси и после чего произведите донастройку принтера.
','');
        </sql>

    </changeSet>

</databaseChangeLog>